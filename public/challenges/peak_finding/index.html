<!DOCTYPE html>
<html ⚡ lang="">
	<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

<title>Challenge 3: Peak Finding</title>
    
<meta name="description" content="" />
<link rel="canonical" href="https://codefriday.cs.astate.edu/challenges/peak_finding/" >
<link rel="sitemap" href="https://codefriday.cs.astate.edu/sitemap.xml" type="application/xml" /><meta property="og:title" content="Challenge 3: Peak Finding">
<meta property="og:url" content="https://codefriday.cs.astate.edu/challenges/peak_finding/">
<meta property="og:description" content="">
<meta property="og:image" content="https://codefriday.cs.astate.edu/logo.png">
<meta property="og:type" content="article">
<meta property="og:site_name" content=""><meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Challenge 3: Peak Finding">
<meta name="twitter:url" content="https://codefriday.cs.astate.edu/challenges/peak_finding/">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://codefriday.cs.astate.edu/logo.png">
<meta name="twitter:site" content=""><meta name="theme-color" content="#333"/>
<link rel="manifest" href="https://codefriday.cs.astate.edu/manifest.json">
<link rel="icon" type="image/png" sizes="32x32" href="https://codefriday.cs.astate.edu/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://codefriday.cs.astate.edu/icons/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://codefriday.cs.astate.edu/icons/apple-touch-icon.png"><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes  -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
<noscript>
    <style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style>
</noscript><style amp-custom>
    
        *,*::before,*::after{box-sizing:border-box}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}body{min-height:100vh;scroll-behavior:smooth;text-rendering:optimizeSpeed}ul[class],ol[class]{list-style:none}a:not([class]){text-decoration-skip-ink:auto}img{max-width:100%;display:block}input,button,textarea,select{font:inherit}.chroma{background-color:#fff}.chroma .err{color:#a61717;background-color:#e3d2d2}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffc}.chroma .lnt{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .ln{margin-right:.4em;padding:0 .4em;color:#7f7f7f}.chroma .k{color:#000;font-weight:700}.chroma .kc{color:#000;font-weight:700}.chroma .kd{color:#000;font-weight:700}.chroma .kn{color:#000;font-weight:700}.chroma .kp{color:#000;font-weight:700}.chroma .kr{color:#000;font-weight:700}.chroma .kt{color:#458;font-weight:700}.chroma .na{color:teal}.chroma .nb{color:#0086b3}.chroma .bp{color:#999}.chroma .nc{color:#458;font-weight:700}.chroma .no{color:teal}.chroma .nd{color:#3c5d5d;font-weight:700}.chroma .ni{color:purple}.chroma .ne{color:#900;font-weight:700}.chroma .nf{color:#900;font-weight:700}.chroma .nl{color:#900;font-weight:700}.chroma .nn{color:#555}.chroma .nt{color:navy}.chroma .nv{color:teal}.chroma .vc{color:teal}.chroma .vg{color:teal}.chroma .vi{color:teal}.chroma .s{color:#d14}.chroma .sa{color:#d14}.chroma .sb{color:#d14}.chroma .sc{color:#d14}.chroma .dl{color:#d14}.chroma .sd{color:#d14}.chroma .s2{color:#d14}.chroma .se{color:#d14}.chroma .sh{color:#d14}.chroma .si{color:#d14}.chroma .sx{color:#d14}.chroma .sr{color:#009926}.chroma .s1{color:#d14}.chroma .ss{color:#990073}.chroma .m{color:#099}.chroma .mb{color:#099}.chroma .mf{color:#099}.chroma .mh{color:#099}.chroma .mi{color:#099}.chroma .il{color:#099}.chroma .mo{color:#099}.chroma .o{color:#000;font-weight:700}.chroma .ow{color:#000;font-weight:700}.chroma .c{color:#998;font-style:italic}.chroma .ch{color:#998;font-style:italic}.chroma .cm{color:#998;font-style:italic}.chroma .c1{color:#998;font-style:italic}.chroma .cs{color:#999;font-weight:700;font-style:italic}.chroma .cp{color:#999;font-weight:700;font-style:italic}.chroma .cpf{color:#999;font-weight:700;font-style:italic}.chroma .gd{color:#000;background-color:#fdd}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#a00}.chroma .gh{color:#999}.chroma .gi{color:#000;background-color:#dfd}.chroma .go{color:#888}.chroma .gp{color:#555}.chroma .gs{font-weight:700}.chroma .gu{color:#aaa}.chroma .gt{color:#a00}.chroma .gl{text-decoration:underline}.chroma .w{color:#bbb}body{display:grid;grid-template-columns:repeat(12,1fr);grid-gap:1em 1em;font-size:1.2em;font-family:pt sans,helvetica,sans-serif;line-height:1.4em;color:#000}.header,.main,.footer{grid-column:4/span 6}.header{margin-top:.3em;margin-bottom:0}.header__box{line-height:0}.header__logo{line-height:0}.header__menu{margin:0;margin-top:.2em;padding:0;display:flex;overflow:auto;justify-content:flex-end;line-height:.8em;padding-bottom:.4em;border:1px dotted #dfdfdf;background-color:#f5f5f5;border-radius:.5em;font-size:.8em;font-weight:700}.header__menu a{border-bottom:none;color:#2c5fa7}.header__menu a:hover{color:#d66e67}.header__menu__list{display:flex;flex-grow:1;flex-wrap:nowrap;align-items:right;justify-content:flex-end}.header__menu__list li{padding:0 1em;display:inline}.main{min-height:60vh}.main .pagination{margin:1.4em auto;display:flex;justify-content:space-between}.main .pagination a{border-bottom:none;color:#2c5fa7}.main .pagination a:hover{color:#d66e67}.footer{font-size:.9rem;display:flex;justify-content:space-between;flex-wrap:wrap}h1,h2,h3,h4{font-family:helvetica,pt sans,sans-serif;line-height:1.5}h1{font-size:3.5rem}h2{font-size:2.5rem}h3{font-size:2rem}h4{font-size:1.5rem}h5{font-size:1.4rem}a{color:#2c5fa7!important;text-decoration:none;transition:background .3s}a:hover{color:#2c5fa7}li{margin-top:.25em}pre,code{font-family:cutive mono,inconsolata,courier new,Monaco,monospace;font-size:12pt;background-color:#f1f1f1}blockquote{margin:inherit auto;margin-left:1em;padding:1em;border-left:5px solid #999}blockquote:before{display:none}blockquote:not(:first-of-type){margin-top:.5em}blockquote p{color:#555;font-size:1.25em;font-family:times new roman,serif}.figure{width:100%}.figure--with-caption{display:flex;border-top:6px solid #333}.figure__image--with-caption{min-width:70%}.figure__caption{background-color:#333;color:#fff;font-weight:700;padding:.5em 1em;height:min-content;word-wrap:break-word}.post-it{width:100%;padding:1.5em}.post-it--tip{background-color:#fffacd}.post-it--info{background-color:#87cefa}.post-it--danger{background-color:#f08080}.post-it__title{font-weight:700;font-size:1.5em}.product{width:max-content;position:relative;display:flex;flex-wrap:wrap;justify-content:space-around;padding:1em}.product__image{width:100%;max-height:300px;max-width:300px}.product__content{display:flex;flex-direction:column}.product__title{font-weight:700;font-size:1.5rem}.product__cta{font-weight:700;font-size:1.2em;padding:.5em;color:#fff;background-color:#333;border-bottom:unset;position:absolute;bottom:-1rem;right:-1rem}#tags{margin:0;padding:0}#tags li{display:inline}.content,.summary{width:100%}.content>*,.summary>*{margin-top:1.2em}.content>h1,.summary>h1{margin-top:.5em}.content pre,.summary pre{overflow:auto;padding:.5em}.content code,.summary code{padding:.1em}.content table,.summary table{display:block;overflow-x:auto;border-collapse:collapse;line-height:.8rem}.content table td,.content table th,.summary table td,.summary table th{border:1px solid #ddd}.content table td,.summary table td{padding:.5em 1em}.content table th,.summary table th{padding:.5rem .8rem;background-color:#333;color:#fff}.content table tr:nth-child(even),.summary table tr:nth-child(even){background-color:#f1f1f1}.content table tr:hover,.summary table tr:hover{background-color:#ddd}.content .highlight .chroma,.summary .highlight .chroma{background-color:#f1f1f1}.content .under-title,.summary .under-title{display:flex;flex-wrap:wrap;justify-content:space-between;line-height:1rem;font-size:1rem}.content .under-title__info,.content .under-title__social-share,.summary .under-title__info,.summary .under-title__social-share{align-self:center}.content .under-title__social-share,.summary .under-title__social-share{display:flex;align-items:center}.content .under-title__social-share__button,.summary .under-title__social-share__button{margin:0 .5em;border-radius:50%;background-size:60%}.content .ad,.summary .ad{display:flex;margin:1rem auto;align-content:center;width:min-content;height:min-content;min-width:320px;min-height:320px;border:1px solid #333}.content .ad__fallback,.summary .ad__fallback{display:flex;align-items:center}.content .ad__fallback p,.summary .ad__fallback p{margin:auto}.content__title>a,.summary__title>a{color:#000!important}.article-head{margin-bottom:0}.article-head a{color:#2c5fa7}@media(max-width:1200px){body{grid-gap:0}.main,.header,.footer{grid-column:1/span 12}.main,.footer{margin:.5em .75em 0 .5em}.header{margin:0}.header__menu{border:none;border-bottom:1px solid #333}h1{font-size:2.5rem}h2{font-size:2rem}h3{font-size:1.66rem}h4{font-size:1.25rem}.post-it{margin-left:0;margin-right:0}}@media(max-width:600px){.under-title__social-share{width:100%;margin-top:1.5em;justify-content:space-between}.figure{flex-direction:column-reverse}.figure--with-caption{border-top:none}.figure__caption{position:relative;max-width:100%}}
    
    
        
            
        
    
</style><script async src="https://cdn.ampproject.org/v0.js"></script>

</head>
	<body>




  
  
  

  
  
  
    
  

  
  
  
    
  

  
  
  


<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      
        
        {
          "@type": "ListItem",
          "position":  1 ,
          "item": {
            "@id": "https:\/\/codefriday.cs.astate.edu",
            "name": "Home"
          }
        }
      
        ,
        {
          "@type": "ListItem",
          "position":  2 ,
          "item": {
            "@id": "https:\/\/codefriday.cs.astate.edu\/challenges\/",
            "name": "Challenges"
          }
        }
      
        ,
        {
          "@type": "ListItem",
          "position":  3 ,
          "item": {
            "@id": "https:\/\/codefriday.cs.astate.edu\/challenges\/peak_finding\/",
            "name": "Peak finding"
          }
        }
       ]
  }
</script><script type="application/ld+json">
  {
    "@context":"http://schema.org",
    "@type": "BlogPosting",
    "image": "https:\/\/codefriday.cs.astate.edu",
    "url": "https:\/\/codefriday.cs.astate.edu\/challenges\/peak_finding\/",
    "headline": "Challenge 3: Peak Finding",
    "alternativeHeadline": "Challenge 3: Peak Finding",
    "dateCreated": "2014-10-03T00:00:00",
    "datePublished": "2014-10-03T00:00:00",
    "dateModified": "2014-10-03T00:00:00",
    "inLanguage": "",
    "isFamilyFriendly": "true",
    "copyrightYear": "2014",
    "copyrightHolder": "",
    "accountablePerson": {
      "@type": "Person",
      "name": "",
      "url": ""
    },
    "author": {
      "@type": "Person",
      "name": "",
      "url": "https:\/\/codefriday.cs.astate.edu"
    },
    "creator": {
      "@type": "Person",
      "name": "",
      "url": "https:\/\/codefriday.cs.astate.edu"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{code|friday}",
      "url": "https:\/\/codefriday.cs.astate.edu",
      "logo": {
        "@type": "ImageObject",
        "url": "\/CodeFriday_drawing.png",
        "width":"600",
        "height":"85"
      }
    },
    "mainEntityOfPage": "https:\/\/codefriday.cs.astate.edu\/challenges\/peak_finding\/",
    "keywords": "null",
    "genre": "null",
    "articleSection": "Challenges"
  }
</script><header class="header"><header class="header__box">
<a class="header__logo" data-rel="prefetch" href="https://codefriday.cs.astate.edu" aria-label="Go back to the homepage"><img src="/images/CodeFriday_drawing.png" />
</a>
</header>
<nav class="header__menu"><ul class="header__menu__list">
    
        
        <li>
            <a href="https://codefriday.cs.astate.edu/challenge"
                
                >
                <span>{challenge}</span>
            </a>
        </li>
    
        
        <li>
            <a href="https://codefriday.cs.astate.edu/rankings"
                
                >
                <span>{hall of fame}</span>
            </a>
        </li>
    
        
        <li>
            <a href="https://codefriday.cs.astate.edu/topics"
                
                >
                <span>{topics}</span>
            </a>
        </li>
    
</ul></nav></header>
		<main class="main">
	<article class="content">
		

<h1 id="challenge-3-peak-finding">Challenge 3: Peak Finding</h1>

<h2 id="background">Background</h2>

<p>Many sources of data that we encounter in programming produce <em>timeseries</em> data.  That means that the data values are produced at specific points in time, often (but not always) at regular intervals.  Examples of timeseries data would include stock market prices, river levels, temperature over time, etc.</p>

<p>A common data-processing task related to timeseries data is to find places in the data where <em>peaks</em> occur.  A peak can be formally defined as a local maxima whose value exceeds some threshold of significance with respect to the surrounding data.  Imagine a graph of the average temperature (measured from ice cores) for the past 800000 years:</p>

<p><img src="images/historical_temperature.jpg" alt="Temperature Graph" title="Image from: http://projects.kmi.open.ac.uk/role/moodle/mod/page/view.php?id=625" /></p>

<!-- <small><i>Image from: http://projects.kmi.open.ac.uk/role/moodle/mod/page/view.php?id=625</i></small> -->

<p>Many peaks and valleys can be clearly seen in the graph.  Data analysis algorithms are often required to locate these peaks in (sometimes noisy) data, and store those locations for use by other parts of the software.</p>

<p>Many algorithms exist for peak finding, depending on whether or not <em>all</em> peaks need to be located, or just a <em>single</em> peak.  The simplest algorithm for finding <em>all</em> peaks is to simply consider each data point&rsquo;s relationship to its two neighboring points.  If the data point is &ldquo;higher&rdquo; than both neighbors, it represents a local maxima.</p>

<p>The tricky part is deciding whether the local maxima is significant or not (especially if the data is noisy).  Often a simple thresholding approach is used: &ldquo;Is the value at the local maxima greater than <em><strong>t</strong></em>?&rdquo; Where <em><strong>t</strong></em> is some pre-defined threshold value.  In the graph above, perhaps <em><strong>0</strong></em> is chosen as the threshold.  There would be 5 peaks whose magnitude is greater than the threshold.  This still leaves a problem of multiple &ldquo;noise&rdquo; peaks being found if the data is not increasing and decreasing smoothly.  Look at the data around 0, 125 and 405 thousand years ago to see how this could be a problem.</p>

<h2 id="challenge">Challenge</h2>

<p>This challenge is in two parts:
1. Given a set of timeseries data in a text-based input file, determine where <em>all</em> sigificant peaks occur in the data.
2. If the dataset contains peaks that are roughly periodic in nature, calculate the average period, and use that to predict future peaks.</p>

<h3 id="specifics">Specifics</h3>

<h4 id="1-determine-peak-locations">1. Determine Peak Locations</h4>

<p>A file containing information on the number of searches performed per week related to the terms &ldquo;solar eclipse&rdquo; and &ldquo;eclipse&rdquo; is provided (see attachments below).  Using this file as sample data, you should create a program capable of reading the file and locating all significant peaks within the file.  You should (at a minimum) display the dates for the weeks corresponding to the peaks in the data.  Please allow the user to enter the file name so that different data files can be used.</p>

<h4 id="2-determine-period-and-predict-future-peaks">2. Determine Period and Predict Future Peaks</h4>

<p>The data provided happens to contain peaks that are roughly periodic (they occur in predictable cycles).  For part 2 of this challenge, you will determine if the data is roughly periodic, determine the aproximate period of peaks if it is, and also (if the data is periodic) extrapolate the locations of expected future peaks for some period of time.  For this challenge, 1 year will be a sufficient length of time for future prediction.  Also, if the data is periodic, but some expected peaks are missing, your program should report locations (weeks, in this case) where peaks would be expected, but do not occur.</p>

<h2 id="test-data">Test Data</h2>

<p>The file <tt><em>&ldquo;eclipse_searches.data&rdquo;</em></tt> (attached below) contains lines corresponding to weeks of search data obtained from Google Trends, for a combination of the search terms &ldquo;solar eclipse&rdquo; and &ldquo;eclipse&rdquo;.</p>

<p>The data is formatted as follows:</p>
<pre><code>WEEK-START-DATE--WEEK-END-DATE NUMBER_OF_SEARCHES</code></pre>
<p>Where the week&rsquo;s date range consists of two dates in the form:<br />
<em><code>YYYY-MM-DD</code></em><br />
that are separated by a double-hyphen (<code>&quot;--&quot;</code>).  The first date is the beginning date for that week, and the second date is the end date.</p>

<p>The number of searches is just an integer value.  There is a single space separating the two pieces of information in the file.  Each line is terminated with a UNIX-style endline (<code>'\n'</code>), including the  last line in the file.</p>

<p>Ten lines from the file are shown below for reference:</p>
<pre><code>2009-06-07--2009-06-13 14
2009-06-14--2009-06-20 14
2009-06-21--2009-06-27 16
2009-06-28--2009-07-04 15
2009-07-05--2009-07-11 18
2009-07-12--2009-07-18 22
2009-07-19--2009-07-25 136
2009-07-26--2009-08-01 19
2009-08-02--2009-08-08 18
2009-08-09--2009-08-15 16</code></pre>
<hr />

<h3 id="dataset-download">Dataset Download</h3>

<ul>
<li><a href="/files/eclipse_searches.data">eclipse_searches.data</a></li>
</ul>

</article>

		</main>
		<footer class="footer"><div class="footer__copyright">© Arkansas State University 2021</div><div class="footer__languages">
	
</div></footer>
	</body>
</html>
